<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Índice Completo sobre Ethereum</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --bg-secondary: rgba(255, 255, 255, 0.85);
      --bg-tertiary: rgba(248, 250, 252, 0.8);
      --text-primary: #2d3748;
      --text-secondary: #4a5568;
      --text-light: #ffffff;
      --accent-primary: #667eea;
      --accent-secondary: #764ba2;
      --accent-gradient: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      --border-color: rgba(226, 232, 240, 0.8);
      --shadow-card: 0 15px 35px rgba(0, 0, 0, 0.08);
      --border-radius: 20px;
      --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    [data-theme="dark"] {
      --bg-primary: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
      --bg-secondary: rgba(26, 32, 44, 0.85);
      --bg-tertiary: rgba(45, 55, 72, 0.7);
      --text-primary: #f7fafc;
      --text-secondary: #a0aec0;
      --accent-primary: #8a78e4;
      --accent-secondary: #48dbfb;
      --border-color: rgba(255, 255, 255, 0.15);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; line-height: 1.8; background: var(--bg-primary); color: var(--text-primary); transition: var(--transition); min-height: 100vh; position: relative; overflow-x: hidden; }
    .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
    .particle { position: absolute; border-radius: 50%; animation: float 25s infinite linear; opacity: 0; background: rgba(255, 255, 255, 0.6);}
    @keyframes float { 0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 10%, 90% { opacity: 0.6; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }

    .container { max-width: 1000px; margin: 0 auto; padding: 2rem; z-index: 1; }
    .header { text-align: center; margin-bottom: 3rem; position: relative; }
    .main-title { font-size: clamp(2.5rem, 5vw, 4.2rem); font-weight: 800; background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem; }
    .subtitle { font-size: 1.4rem; color: var(--text-light); font-weight: 400; opacity: 0.95; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); max-width: 900px; margin: auto; }

    .theme-toggle { position: fixed; top: 2rem; right: 2rem; width: 60px; height: 60px; border: 1px solid var(--border-color); border-radius: 50%; background: var(--bg-secondary); backdrop-filter: blur(15px); box-shadow: var(--shadow-card); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; color: var(--accent-primary); transition: var(--transition); z-index: 1000; }
    .theme-toggle:hover { transform: scale(1.15) rotate(180deg); box-shadow: 0 25px 50px rgba(0, 0, 0, 0.12), 0 0 30px rgba(102, 126, 234, 0.3); }

    .lesson-container { display: flex; flex-direction: column; gap: 1.5rem; }
    .topic-card { background: var(--bg-secondary); backdrop-filter: blur(20px); border-radius: var(--border-radius); box-shadow: var(--shadow-card); border: 2px solid var(--border-color); overflow: hidden; transition: var(--transition); }
    .topic-header { cursor: pointer; padding: 1.5rem 2rem; display: flex; justify-content: space-between; align-items: center; }
    .topic-title { font-size: 1.3rem; font-weight: 600; color: var(--text-primary); }
    .expand-icon { font-size: 1.2rem; color: var(--text-secondary); transition: var(--transition); }
    .topic-card.open .expand-icon { transform: rotate(180deg); }
    .topic-content { max-height: 0; overflow: hidden; transition: max-height 1.2s ease, padding 1.2s ease; background: var(--bg-tertiary); }
    .topic-card.open .topic-content { max-height: 9000px; padding: 1.5rem 2rem; border-top: 1px solid var(--border-color); }
    .topic-content p, .topic-content ul, .topic-content ol { color: var(--text-secondary); margin-bottom: 1.5rem; }
    .topic-content h4 { font-size: 1.2rem; color: var(--text-primary); margin-top: 2.5rem; margin-bottom: 1.5rem; font-weight: 600; border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem; }
    .topic-content ul, .topic-content ol { padding-left: 20px; }
    .topic-content li { margin-bottom: 1rem; line-height: 1.7; }
    .topic-content strong { color: var(--text-primary); font-weight: 600; }
    
    .mermaid {
      margin: 2.5rem 0;
      padding: 1rem;
      border-radius: 10px;
      border: 1px solid var(--border-color);
      background: rgba(0,0,0,0.02);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    [data-theme="dark"] .mermaid {
      background: rgba(0,0,0,0.2);
    }

    footer {
      text-align: center; margin-top: 4rem; padding: 2rem 0;
      border-top: 1px solid var(--border-color);
    }
    footer p { color: var(--text-light); opacity: 0.9; }
  </style>
</head>
<body data-theme="dark">
  <div class="particles" id="particles-container"></div>
  <div class="theme-toggle" id="themeToggleButton" title="Cambiar tema"><i class="fas fa-moon" id="theme-icon"></i></div>
  
  <div class="container">
    <header class="header">
      <h1 class="main-title">Introducción Completa a Ethereum</h1>
      <p class="subtitle">Una Visión Estructurada sobre la Arquitectura, Consenso, Economía y Escalado de la Computadora Mundial.</p>
    </header>

    <div class="lesson-container">
        
        <div class="topic-card open">
            <div class="topic-header"><span class="topic-title">1. ¿Qué es Ethereum? Visión de “Computadora Mundial”</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>Ethereum es una plataforma de cómputo descentralizada que permite ejecutar <strong>contratos inteligentes</strong> (programas auto-ejecutables) en una red global de nodos, eliminando la necesidad de servidores o autoridades centrales. A diferencia de Bitcoin, que fue diseñado principalmente como dinero digital, Ethereum funciona como una <strong>“computadora mundial”</strong>: una capa de ejecución de propósito general donde cualquier persona puede desplegar lógica programable y mover valor bajo reglas transparentes y verificables.</p>
                <p>El activo nativo de la red es el <strong>Ether (ETH)</strong>, que cumple tres funciones vitales:</p>
                <ul>
                    <li><strong>Pagar el gas</strong>: El coste computacional de las transacciones y operaciones.</li>
                    <li><strong>Servir como colateral</strong>: La base económica para el ecosistema de Finanzas Descentralizadas (DeFi).</li>
                    <li><strong>Activo de staking</strong>: Utilizado para asegurar la red bajo el mecanismo de consenso de Prueba de Participación.</li>
                </ul>
                <p>El corazón de Ethereum es la <strong>EVM (Ethereum Virtual Machine)</strong>, el entorno de ejecución estandarizado donde todos los contratos inteligentes operan.</p>
                <div class="mermaid">
                    graph TD
                        subgraph "Ethereum - La Computadora Mundial"
                            A[Red Global de Nodos] --> B{Capa de Consenso PoS}
                            A --> C{Capa de Ejecución EVM}
                        end

                        subgraph "Aplicaciones dApps"
                            D[DeFi - Préstamos, DEX]
                            E[NFTs - Arte, Gaming]
                            F[DAOs - Gobernanza]
                            G[Identidad y más]
                        end

                        C -- Ejecuta --> D
                        C -- Ejecuta --> E
                        C -- Ejecuta --> F
                        C -- Ejecuta --> G

                        style A fill:#8a78e4,stroke:#f7fafc,stroke-width:2px
                        style C fill:#48dbfb,stroke:#f7fafc,stroke-width:2px
                </div>
            </div>
        </div>

        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">2. Arquitectura del Protocolo - Las Dos Capas</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>A alto nivel, el protocolo de Ethereum está dividido en dos capas fundamentales que trabajan en conjunto:</p>
                <ol>
                    <li><strong>Capa de Ejecución (Execution Layer)</strong>: Es donde "viven" los contratos y se procesan las transacciones. Su principal componente es la EVM, que se encarga de cambiar el estado de la red (ej. transferir balances, modificar datos de un contrato) según las transacciones recibidas.</li>
                    <li><strong>Capa de Consenso (Consensus Layer)</strong>: Conocida como la <em>Beacon Chain</em>, es la responsable de la seguridad de la red. Coordina a los validadores para que se pongan de acuerdo sobre el orden de las transacciones y la validez de los nuevos bloques, asegurando que la cadena avance de forma segura y coherente.</li>
                </ol>
                <div class="mermaid">
                    graph TD
                        Usuario --> TX["Transacción - Transferir 1 ETH"]
                        
                        subgraph "Capa de Ejecución EL"
                            direction LR
                            TX --> EVM["EVM - Procesa la lógica"] --> Estado["Actualización del Estado Global<br/>Balances, Storage"]
                        end

                        subgraph "Capa de Consenso CL - Beacon Chain"
                            Validador["Validadores Stakers"] -- Proponen y Votan por Bloques --> Bloque[("Nuevo Bloque")]
                        end

                        Validador -- Sincroniza y Asegura --> EVM
                        Bloque -- Contiene --> TX
                </div>
            </div>
        </div>

        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">3. Mecanismo de Consenso - Prueba de Participación (PoS)</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>Desde la actualización "The Merge" en 2022, Ethereum utiliza un mecanismo de <strong>Prueba de Participación (Proof of Stake - PoS)</strong>. En lugar de que los mineros compitan resolviendo problemas criptográficos (Prueba de Trabajo), los <strong>validadores</strong> son seleccionados para proponer nuevos bloques en función de la cantidad de ETH que tienen bloqueado ("staked").</p>
                 <ul>
                    <li><strong>Funcionamiento</strong>: Los validadores bloquean 32 ETH para participar. Son elegidos aleatoriamente para proponer bloques en intervalos de tiempo fijos llamados <em>slots</em> (12 segundos). Los demás validadores "atestiguan" (votan) por la validez de ese bloque.</li>
                    <li><strong>Seguridad</strong>: Un comportamiento honesto es recompensado con más ETH. Un comportamiento malicioso (ej. proponer bloques inválidos) es castigado con la pérdida de una parte del ETH bloqueado, un proceso llamado <em>slashing</em>.</li>
                </ul>
                <div class="mermaid">
                    graph TD
                        A[Validador bloquea 32 ETH<br/>Staking] --> B{Seleccionado para Proponer<br/>en un Slot de 12s}
                        
                        B --> C[Propone un nuevo Bloque]
                        C --> D{Otros validadores<br/>Atestiguan o Votan}
                        
                        subgraph "Resultados"
                            D -- Votos Suficientes --> E["Bloque Finalizado e Inmutable<br/>Recompensas para todos"]
                            D -- Comportamiento Malicioso Detectado --> F["Penalización por Slashing<br/>Pérdida de ETH"]
                        end
                </div>
            </div>
        </div>

        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">4. Economía y Tarifas - EIP-1559</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>Cada operación en la EVM tiene un coste medido en <strong>gas</strong>. La tarifa final de una transacción se paga en ETH. La actualización EIP-1559 introdujo un modelo de tarifas más predecible, compuesto por dos partes:</p>
                <ol>
                    <li><strong>Tarifa Base (Base Fee)</strong>: Una tarifa mínima requerida, determinada algorítmicamente por la congestión de la red. Esta tarifa <strong>se quema</strong> (se destruye), lo que introduce una presión deflacionaria sobre el ETH.</li>
                    <li><strong>Propina Prioritaria (Priority Tip)</strong>: Una propina opcional que el usuario añade para incentivar al validador a incluir su transacción más rápidamente en el bloque.</li>
                </ol>
                <div class="mermaid">
                    graph TD
                        Total["Tarifa Total de la Transacción"]
                        
                        Total --> BaseFee["1. Tarifa Base - Base Fee<br/>- Determinada por el protocolo<br/>- Depende de la congestión"]
                        Total --> PriorityTip["2. Propina Prioritaria - Priority Tip<br/>- Fijada por el usuario<br/>- Incentivo para el validador"]
                        
                        BaseFee --> Quemado["Se Quema o Destruye"]
                        PriorityTip --> Validador["Se entrega al Validador"]

                        style Quemado fill:#FF6347,stroke:#333,stroke-width:2px
                        style Validador fill:#90EE90,stroke:#333,stroke-width:2px
                </div>
            </div>
        </div>

        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">5. Escalado - El Rol de las Capas 2 (L2)</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>Para manejar un volumen global de transacciones, Ethereum L1 prioriza la <strong>seguridad</strong> y la <strong>descentralización</strong>. El escalado de la ejecución (transacciones rápidas y baratas) se delega a soluciones de <strong>Capa 2 (L2)</strong>, principalmente los <em>Rollups</em>.</p>
                <p>Los Rollups procesan miles de transacciones fuera de la cadena principal (off-chain), y luego publican un resumen comprimido de esos datos y una prueba criptográfica en la L1. De esta manera, heredan la seguridad de Ethereum L1 mientras ofrecen un rendimiento mucho mayor. La actualización Dencun (EIP-4844) redujo drásticamente el coste de publicar estos datos mediante "blobs", abaratando las tarifas en las redes L2.</p>
                <div class="mermaid">
                    graph TD
                        subgraph "L1 - Ethereum Mainnet - Capa de Seguridad"
                            direction TB
                            Seguridad["Máxima Seguridad y Descentralización"]
                            DA["Disponibilidad de Datos - Blobs"]
                        end

                        subgraph "L2 - Rollups - Capa de Escalado"
                            direction LR
                            OPT["Optimistic Rollups<br/>Ej. Arbitrum, Optimism"]
                            ZK["ZK-Rollups<br/>Ej. zkSync, Starknet, Scroll"]
                        end
                        
                        Usuario --> Transacciones["Transacciones Rápidas y Baratas"] --> L2
                        L2 -- "Publican pruebas y datos comprimidos" --> DA

                        style L1 fill:#8a78e4,stroke:#f7fafc
                        style L2 fill:#48dbfb,stroke:#f7fafc
                </div>
            </div>
        </div>

    </div>

    <footer>
      <p>Material elaborado por el profesor Sergio Gevatschnaider</p>
    </footer>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    (function() {
        const themeToggleButton = document.getElementById('themeToggleButton');
        const themeIcon = document.getElementById('theme-icon');
        const bodyEl = document.body;

        function renderMermaid(theme) {
            // Eliminar cualquier instancia SVG previa para forzar el re-renderizado
            const existingSvgs = document.querySelectorAll('.mermaid svg');
            existingSvgs.forEach(svg => svg.remove());
            
            // Limpiar el atributo 'data-processed' que Mermaid añade
            const mermaidDivs = document.querySelectorAll('.mermaid');
            mermaidDivs.forEach(div => div.removeAttribute('data-processed'));

            const mermaidConfig = {
                startOnLoad: false,
                theme: theme === 'dark' ? 'dark' : 'default',
                fontFamily: '"Inter", sans-serif',
            };
            mermaid.initialize(mermaidConfig);
            
            // Forzar renderizado
            mermaid.run();
        }

        function setTheme(theme, isInitialLoad = false) {
            bodyEl.setAttribute('data-theme', theme);
            if (!isInitialLoad) {
                localStorage.setItem('theme', theme);
            }
            if (themeIcon) {
                themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
            renderMermaid(theme);
        }

        themeToggleButton.addEventListener('click', () => {
            const currentTheme = bodyEl.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        });

        const savedTheme = localStorage.getItem('theme') || 'dark';
        
        document.addEventListener('DOMContentLoaded', () => {
            setTheme(savedTheme, true);
        });

        document.querySelectorAll('.topic-header').forEach(header => {
            header.addEventListener('click', () => {
                header.parentElement.classList.toggle('open');
            });
        });

        const container = document.getElementById('particles-container');
        if (container) {
            const count = 30;
            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + 'vw';
                p.style.width = (Math.random() * 5 + 2) + 'px';
                p.style.height = p.style.width;
                p.style.animationDelay = Math.random() * -20 + 's';
                p.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(p);
            }
        }
    })();
  </script>
</body>
</html>